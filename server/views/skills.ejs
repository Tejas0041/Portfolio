<%- include('partials/header') %>
<%- include('partials/sidebar') %>

<main class="lg:ml-64 p-4 sm:p-6 lg:p-8 pt-16 lg:pt-8">
  <h1 class="text-2xl sm:text-3xl font-bold mb-6 sm:mb-8">Manage Skills</h1>
  
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8">
    <!-- Add Skill Form -->
    <div class="bg-dark-200 p-4 sm:p-6 rounded-xl h-fit">
      <h2 class="text-xl font-semibold mb-4">Add New Skill</h2>
      <form action="/admin/skills" method="POST" class="space-y-4">
        <div>
          <label class="block text-sm text-gray-400 mb-2">Skill Name</label>
          <input type="text" name="name" required
            class="w-full px-4 py-3 rounded-lg bg-dark-300 border border-gray-700 text-white focus:border-primary focus:outline-none"
            placeholder="e.g., React">
        </div>
        <div>
          <label class="block text-sm text-gray-400 mb-2">Category</label>
          <select name="category" required
            class="w-full px-4 py-3 rounded-lg bg-dark-300 border border-gray-700 text-white focus:border-primary focus:outline-none">
            <option value="frontend">Frontend</option>
            <option value="backend">Backend</option>
            <option value="languages">Languages</option>
            <option value="tools">Tools & Others</option>
          </select>
        </div>
        <div>
          <label class="block text-sm text-gray-400 mb-2">Icon Name (react-icons)</label>
          <input type="text" name="icon"
            class="w-full px-4 py-3 rounded-lg bg-dark-300 border border-gray-700 text-white focus:border-primary focus:outline-none"
            placeholder="e.g., SiReact">
          <p class="text-xs text-gray-500 mt-1">From react-icons (Si prefix for simple-icons)</p>
        </div>
        <div>
          <label class="block text-sm text-gray-400 mb-2">Color (hex)</label>
          <input type="text" name="color" value="#6366f1"
            class="w-full px-4 py-3 rounded-lg bg-dark-300 border border-gray-700 text-white focus:border-primary focus:outline-none"
            placeholder="#61DAFB">
        </div>
        <div>
          <label class="block text-sm text-gray-400 mb-2">Order</label>
          <input type="number" name="order" value="0"
            class="w-full px-4 py-3 rounded-lg bg-dark-300 border border-gray-700 text-white focus:border-primary focus:outline-none">
        </div>
        <button type="submit" class="w-full py-3 bg-gradient-to-r from-primary to-secondary rounded-lg font-semibold">
          Add Skill
        </button>
      </form>
    </div>
    
    <!-- Skills List -->
    <div class="lg:col-span-2 space-y-6">
      <% const categories = ['frontend', 'backend', 'languages', 'tools'] %>
      <% categories.forEach(cat => { %>
        <div class="bg-dark-200 p-6 rounded-xl">
          <h2 class="text-xl font-semibold mb-4 capitalize"><%= cat %></h2>
          <div class="flex flex-wrap gap-3">
            <% skills.filter(s => s.category === cat).forEach(skill => { %>
              <div class="flex items-center gap-2 px-4 py-2 rounded-full bg-dark-100 group">
                <span style="color: <%= skill.color %>">●</span>
                <span><%= skill.name %></span>
                <form action="/admin/skills/<%= skill._id %>/delete" method="POST" class="inline">
                  <button type="submit" class="text-red-400 hover:text-red-300 ml-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    ✕
                  </button>
                </form>
              </div>
            <% }) %>
            <% if (skills.filter(s => s.category === cat).length === 0) { %>
              <p class="text-gray-500">No skills added yet</p>
            <% } %>
          </div>
        </div>
      <% }) %>
    </div>
  </div>
</main>

<%- include('partials/footer') %>
